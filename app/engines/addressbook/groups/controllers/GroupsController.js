angular.module("callburnApp").controller("GroupsController",["$scope","$rootScope","$state","groups","addedContacts","Restangular","$stateParams","growl","CallBournModal","$q","$interval","$timeout","GroupsService","$document",function($scope,$rootScope,$state,groups,addedContacts,Restangular,$stateParams,growl,CallBournModal,$q,$interval,$timeout,GroupsService,$document){$rootScope.currentActiveUrl=$state.current.name,$rootScope.currentActiveRoute="groups",$rootScope.tutorialSidePopup=!0;var selectedGroupIds={},showMoreSelectBox=!0;$scope.lastSocketEvent=null,window.document.title=0===$scope.notSeenNotificationsCount?"Phonebook - Callburn":"("+$scope.notSeenNotificationsCount+") Phonebook - Callburn",$scope.phoneBookData=new GroupsService(groups,addedContacts,selectedGroupIds,showMoreSelectBox),$rootScope.socket.on("address-book-updated",function(res){if($rootScope.currentUser._id==res.data.user_id){var now=Math.round((new Date).getTime()/1e3);(!$scope.lastSocketEvent||$scope.lastSocketEvent&&$scope.lastSocketEvent>now+1)&&($scope.phoneBookData.reloadGroups({},"socket"),$scope.lastSocketEvent=now)}}),$document.on("click",function(e){"groups-more-dropdown-button"===e.target.id?$scope.phoneBookData.groupsMoreDropdown=!$scope.phoneBookData.groupsMoreDropdown:"group_dropdown_inner"!==e.target.classList[0]&&($scope.phoneBookData.groupsMoreDropdown=!1)});$scope.inProgress=void 0}]);