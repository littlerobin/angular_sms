angular.module("callburnApp").controller("AddAudioTemplateController",["$scope","$rootScope","$state","Restangular","ttsLanguages","FileUploader","notify","$timeout",function($scope,$rootScope,$state,Restangular,ttsLanguages,FileUploader,notify,$timeout){$scope.goToNotification=$rootScope.goToNotification,$rootScope.tutorialSidePopup=!1,$scope.ttsLanguages=ttsLanguages.resource.languages,$scope.ttsData={language:""},$scope.createAudioFromTextForVoice=function(){console.log($scope.audioFiles),$rootScope.startLoader(),Restangular.all("campaigns/create-audio-from-text").post($scope.ttsData).then(function(data){$rootScope.stopLoader(),0==data.resource.error.no?$state.go("campaign.templates"):$scope.voiceTtsError=data.resource.error.text})},$scope.openCampaignVoiceFileSelect=function(){$timeout(function(){angular.element("#campaignVoiceFileInput1").trigger("click")},100)};var campaignVoiceMessageUpload=$scope.campaignVoiceMessageUpload=new FileUploader({formData:[{is_template:1}],url:"/campaigns/upload-audio-file",alias:"file",autoUpload:!0});campaignVoiceMessageUpload.onAfterAddingFile=function(item){$scope.uploadingAudioName=item.file.name},campaignVoiceMessageUpload.onBeforeUploadItem=function(){$rootScope.startLoader()},campaignVoiceMessageUpload.onSuccessItem=function(item,response,status,headers){$rootScope.stopLoader(),0==response.resource.error.no?$state.go("campaign.templates"):notify({message:response.resource.error.text,classes:["notification-alert-danger"]})},campaignVoiceMessageUpload.onErrorItem=function(item,response,status,headers){$rootScope.stopLoader(),notify({message:"Something went wrong",classes:["notification-alert-danger"]})}}]);