angular.module("callburnApp").controller("SnippetCRUDController",["$scope","$document","$rootScope","$state","$filter","Restangular","callRoutes","$log","FileUploader","$timeout","growl","growlMessages","$sce","SnippetService","editSnippet","$q","CallBournModal","$interval","SettingsService","timezones","user","SnippetCrudDataService",function($scope,$document,$rootScope,$state,$filter,Restangular,callRoutes,$log,FileUploader,$timeout,growl,growlMessages,$sce,SnippetService,editSnippet,$q,CallBournModal,$interval,SettingsService,timezones,user,SnippetCrudDataService){$scope.tinymceOptions={onChange:function(e){},inline:!1,plugins:"advlist autolink link image lists charmap print preview",skin:"lightgray",theme:"modern"},$scope.editSnippet=editSnippet,$scope.weekdays=["weekdays_Monday","weekdays_Tuesday","weekdays_Wednesday","weekdays_Thursday","weekdays_Friday","weekdays_Saturday","weekdays_Sunday"],$scope.englishWeekdays=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],$scope.dateRanges=[{name:trans("click_to_call_entire_daytime"),time:"09:00 - 20:00"},{name:trans("click_to_call_full_day"),time:"00:00 - 23:59"},{name:trans("click_to_call_morning_only"),time:"09:00 - 13:00"},{name:trans("click_to_call_afternoon_only"),time:"15:00 - 20:00"}],$scope.hoursSelect=[],$scope.weekDaysCustom=[],$scope.invalidUrls=[],$scope.defaultDateTab=0,$scope.minutesSelect=[],$scope.hoursArrCustom=[],$scope.minutesArrCustom=[],$scope.selectedCurrentHour="10",$scope.selectedCurrentMinute="00",$scope.choiceMin=function(min){$scope.selectedCurrentMinute=min};var ids=["minuteSelect1","minuteSelect2","hourSelect1","hourSelect2"];$document.on("click",function($event){ids.indexOf($event.target.id)==-1&&($scope.hoursSelectShow=!1,$scope.minutesSelectShow=!1)}),$scope.userCallerIds=user.resource.user_data.numbers.length?user.resource.user_data.numbers:null,$scope.hoursSelectShow=!1,$scope.buttonLoading=!1,$scope.minutesSelectShow=!1,$scope.status={},$scope.status.dropdownOpen=!1,$scope.status.dropdownOpen2=!1,$scope.status.dropdownOpen3=!1,$scope.status.dropdownOpen4=!1,$scope.status.dropdownOpen5=!1,$scope.isCustomTime=!1,$scope.customDateRangeLocal=null,$scope.defaultTextTab=0,$scope.defaultAudioTab=0,$scope.firstCountryId=0,$scope.frontDay="",$scope.frontDayCustom="",$scope.saveButtonColor="btn-primary",$scope.snippetImagePath="/assets/callburn/images/click_to_call_icons/callerid-icon.svg";var subdomainRandomValue=function(){for(var string="",random_number=(new Date).getUTCMilliseconds(),possible=random_number+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;i++)string+=possible.charAt(Math.floor(Math.random()*possible.length));return string};if($scope.saveButtonMouseover=!0,$rootScope.currentUser.balance<.22?$scope.disabledSubmitButton=!0:$scope.disabledSubmitButton=!1,$scope.editSnippet){$scope.snippetData=$scope.editSnippet.resource.snippets,setTimeout(function(){$scope.voiceFile=$scope.snippetData.files?$scope.snippetData.files:null},1e3),$scope.snippetData.is_published?($scope.disabledSubmitButton=!0,$scope.saveButtonMouseover=!1):$scope.saveButtonMouseover=!0,$scope.snippetData.subdomain=$scope.editSnippet.resource.snippets.subdomain,$scope.snippetData.callerIds=[],$scope.snippetData.countries=[],$scope.minutesSelectCustom=[],$scope.customRanges=[],$scope.snippetData.allowed_urls=[],$scope.snippetData.haveInvalidUrl=!1;var urls=$scope.snippetData.allowed_url.split(",");urls.forEach(function(item){if(item.length){var tag={text:item};$scope.snippetData.allowed_urls.push(tag)}}),$scope.snippetData.image_url&&($scope.snippetImagePath=$scope.snippetData.image_url,$rootScope.snippetImagePath=$scope.snippetData.image_url),$scope.snippetData.use_default_image_checkbox=!$scope.snippetData.image_url,$scope.snippetData.allowed_date_times||($scope.snippetData.allowed_date_times={},$scope.snippetData.allowed_date_times.weekDays=[]),$scope.snippetData.custom_date_times?($scope.snippetData.custom_date_times=JSON.parse($scope.snippetData.custom_date_times),$scope.customDateRange=!0,$scope.defaultDateTab=1):($scope.snippetData.custom_date_times=[],$scope.customDateRange=!1,$scope.defaultDateTab=0),$scope.snippetData.country.forEach(function(item){$scope.snippetData.countries.push(item._id)}),$scope.snippetData.caller_id.forEach(function(item){$scope.snippetData.callerIds.push(item._id)}),$scope.snippetData.caller_id_id=$scope.snippetData.caller_id_id?$scope.snippetData.caller_id_id:$scope.userCallerIds[0]._id,$scope.snippetData.snippetName=$scope.snippetData.name,$scope.snippetData.voice_file_id=$scope.snippetData.file_id,$scope.snippetData.image_file_id=$scope.snippetData.image_id,delete $scope.snippetData.caller_id,delete $scope.snippetData.country,delete $scope.snippetData.name,delete $scope.snippetData.file_id,$scope.snippetData.default_text?$scope.defaultTextTab=1:$scope.defaultTextTab=0,$scope.snippetData.voice_file_id?$scope.defaultAudioTab=1:$scope.defaultAudioTab=0}else $scope.snippetData={},$scope.snippetData.callerIds=[],$scope.snippetData.countries=[],$scope.snippetData.allowed_urls=[],$scope.snippetData.allowed_date_times={},$scope.snippetData.custom_date_times=[],$scope.snippetData.allowed_date_times.weekDays=[],$scope.snippetData.caller_id_id=$scope.userCallerIds?$scope.userCallerIds[0]._id:null,$scope.customDateRange=!1,$scope.defaultDateTab=0,$scope.customRanges=[],$scope.snippetData.default_text=null,$scope.snippetData.use_default_image_checkbox=!0,$scope.snippetData.image_name=null,$scope.snippetData.haveInvalidUrl=!1,$scope.snippetData.subdomain=subdomainRandomValue();$scope.wait_time=[60,30,15,10,5,3,2],$scope.callRoutes=[],$scope.snippetData.wait_time=10,$scope.snippetData.maxCustomRangesCount=8,$scope.ismeridian=!0;var fromTime=new Date,fHour=fromTime.getHours();fromTime.setHours(fHour),fromTime.setMinutes(0),$scope.fromTime=fromTime;var toTime=new Date,fMin=toTime.getHours();toTime.setHours(fMin),toTime.setMinutes(0),$scope.toTime=toTime,$scope.hstep=1,$scope.mstep=5,$scope.voiceFile=null,$scope.isRecordedFilePlaying=!1,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.imageFile=null,$scope.thisCanBeusedInsideNgBindHtml=$sce.trustAsHtml($scope.snippetText),$scope.minEndTime=new Date,$scope.createCallRoutes=function(callRoutes){var countries=[];return SnippetService.getCallerIds().then(function(data){if(data.resource.callerIds.length){data.resource.callerIds.map(function(item){return parseInt(item.tariff.prefix)})}else;data.resource.callerIds.length>0&&$scope.snippetData.callerIds.push(data.resource.callerIds[0]._id);for(index in callRoutes){var newRouteObject={_id:callRoutes[index]._id,flagImage:"/assets/callburn/images/flags/"+callRoutes[index].code+".svg",viewText:callRoutes[index].name+" (+"+callRoutes[index].phonenumber_prefix+")",countryPrefix:" (+"+callRoutes[index].phonenumber_prefix+")",customerPrice:callRoutes[index].customer_price};try{$rootScope.currentUser.country_code.toLowerCase()===callRoutes[index].code.toLowerCase()&&$scope.snippetData.countries.push(callRoutes[index]._id)}catch(e){}countries.push(newRouteObject)}}),countries},$scope.callRoutes=$scope.createCallRoutes(callRoutes.resource.routes),$scope.updateCountries=function(ids){Restangular.one("snippets/call-routes/").get({ids:JSON.stringify(ids)}).then(function(data){$scope.callRoutes=$scope.createCallRoutes(data.resource.routes)})},$scope.removeRedColor=function(id){angular.element("#"+id).removeClass("snippet-not-valid"),angular.element("#"+id+"Text").removeClass("snippet-not-valid")},$scope.choiceCallerId=function(callerID){growlMessages.destroyAllMessages(),$scope.removeRedColor("callerIds"),$scope.choiceOrRemove($scope.snippetData.callerIds,callerID._id)},$scope.selectCallerIdId=function(callerIdId){$scope.snippetData.caller_id_id=callerIdId},$scope.choiceCountry=function(id){$scope.removeRedColor("countries"),growlMessages.destroyAllMessages(),$scope.choiceOrRemove($scope.snippetData.countries,id)},$scope.frontCountry=function(id){var firstCountry=!1;return $scope.callRoutes.forEach(function(item){if(item._id==id)return void(firstCountry=item)}),firstCountry?firstCountry:$scope.callRoutes[0]},$scope.replaceToFrontCountry=function(id){$scope.firstCountryId=id,$scope.choice=$scope.frontCountry(id)},$scope.checkInArray=function(array,id){return array.indexOf(id)>-1},$scope.getInterval=function(start,end,step){void 0===step&&(step=1),start=parseInt(start),end=parseInt(end);for(var arr=[],i=start;i<end;i+=step)i<10?arr.push("0"+i):arr.push(""+i);return arr},$scope.makeInterval=function(start,end,step){void 0===step&&(step=1),start=parseInt(start),end=parseInt(end),start>end&&($scope.item=start,start=end,end=$scope.item);for(var interval=[],i=start;i<=end;i+=step)interval.push(i<10?"0"+i:""+i);return interval},$scope.selectHour=function(hour){if($scope.minutesArr=[],hour==$scope.hoursArr[0])for(var i=$scope.fromMinute;i<60;i+=5)$scope.minutesArr.push(i);else if(hour==$scope.hoursArr[$scope.hoursArr.length-1])for(var i=0;i<$scope.toMinute;i+=5)$scope.minutesArr.push(i);else for(var i=0;i<60;i+=5)$scope.minutesArr.push(i);$scope.selecedHour=hour},$scope.selectMinute=function(minute){$scope.selecedMinute=minute},$scope.choiceDateRange=function(dateRange){var times=dateRange.time.split("-");$scope.addCustomRange(times[0],times[1])},$scope.$watch("snippetData.snippetName",function(newVal){newVal&&newVal.length>0&&(growlMessages.destroyAllMessages(),$scope.wrongBorder="")},!0),$scope.choiceHour=function(hour){$scope.selectedCurrentHour=hour,hour==$scope.hoursSelect[$scope.hoursSelect.length-1]&&$scope.isCustomTime?$scope.minutesSelect=$scope.minutesSelectCustom:$scope.minutesSelect=$scope.getInterval(0,60,5)},$scope.choiceOrRemove=function(array,id){if($scope.checkInArray(array,id)){var index=array.indexOf(id);array.splice(index,1)}else array.push(id)},$scope.choiceTime=function(time){$scope.snippetData.wait_time=time},$scope.choiceWeekDay=function(index,part){if(growlMessages.destroyAllMessages(),$scope.removeRedColor("weekDays"),part)if($scope.choiceOrRemove($scope.snippetData.allowed_date_times.weekDays,$scope.englishWeekdays[index]),$scope.snippetData.allowed_date_times.weekDays.length>0){var day=$scope.snippetData.allowed_date_times.weekDays[0];$scope.frontDay=$scope.weekdays[$scope.englishWeekdays.indexOf(day)]}else $scope.frontDay="ctc_today";else{if($scope.weekDaysCustom.length>0){var day=$scope.snippetData.allowed_date_times.weekDays[0];$scope.frontDay=$scope.weekdays[$scope.englishWeekdays.indexOf(day)]}else $scope.frontDay="ctc_today";$scope.choiceOrRemove($scope.weekDaysCustom,$scope.englishWeekdays[index])}},$scope.removeCustomRange=function(dateRange){var index=$scope.snippetData.custom_date_times.indexOf(dateRange);index>=0&&$scope.snippetData.custom_date_times.splice(index,1),$scope.hideSelectedWeekDays(dateRange),$scope.snippetData.custom_date_times.length||($scope.customDateRangeLocal=[],$scope.frontDay="")},$scope.addCustomRange=function(fromTime,toTime){if(!$scope.weekDaysCustom.length)return!1;var time=$filter("date")(fromTime,"HH:mm")+" - "+$filter("date")(toTime,"HH:mm");if($scope.snippetData.custom_date_times.length>=$scope.snippetData.maxCustomRangesCount)return!1;for(var i=0;i<$scope.customRanges.length;i++)if($scope.getCustomRangeTime($scope.customRanges[i])===time)return;if(!$filter("filter")($scope.dateRanges,{time:time}).length){var data={};data[time]=$scope.weekDaysCustom,$scope.snippetData.custom_date_times.push(data),$scope.weekDaysCustom=[]}},$scope.getSelectedWeekdays=function(customRange){var weekDays=Object.values(customRange)[0],data={},selectedWeekdays=[];return weekDays.forEach(function(day){var index=$scope.englishWeekdays.indexOf(day);data[index]=trans($scope.weekdays[index])}),Object.keys(data).sort().forEach(function(i,day){selectedWeekdays.push(data[i])}),selectedWeekdays.join(", ")},$scope.showSelectedWeekDays=function(customRange){angular.element(".ng-snippet-choiced-item").removeClass("snippet-choiced-item");var weekDays=Object.values(customRange)[0];weekDays.forEach(function(day){var block=angular.element("#custom-"+day);block.addClass("snippet-choiced-item")})},$scope.hideSelectedWeekDays=function(customRange){var weekDays=Object.values(customRange)[0];weekDays.forEach(function(day){var block=angular.element("#custom-"+day);block.removeClass("snippet-choiced-item")}),angular.element(".ng-snippet-choiced-item").addClass("snippet-choiced-item")},$scope.getCustomRangeTime=function(customRange){return Object.keys(customRange)[0]},$scope.frontWeekDay=function(weekday){$scope.frontDay=weekday},$scope.frontWeekDayCustom=function(weekday){$scope.frontDay=$scope.weekdays[$scope.englishWeekdays.indexOf(weekday)],SnippetCrudDataService.getHoursAndMinutes($scope.customDateRangeLocal[weekday]).then(function(data){$scope.customCurrentDayHours=data,$scope.hoursArrCustom=[],data.forEach(function(item){$scope.hoursArrCustom.push(Object.keys(item)[0])}),$scope.selecedHour=$scope.hoursArrCustom[0]})},$scope.selectHourCustom=function(hour){$scope.selecedHour=hour,$scope.customCurrentDayHours.forEach(function(item){if(Object.keys(item)[0]===hour){var minutes=Object.values(item)[0];$scope.minutesArrCustom=$scope.makeInterval(minutes.from,minutes.to,5)}})},$scope.startTimeChange=function(time){var startTimeHour=$filter("date")(time,"HH"),startTimeMin=$filter("date")(time,"mm"),date=new Date;date.setHours(startTimeHour),date.setMinutes(startTimeMin),$scope.minEndTime=date;var endTimeHour=angular.element(".endTimePicker td.hours > input"),endTimeMin=angular.element(".endTimePicker td.minutes > input");endTimeHour.val()<=startTimeHour&&(endTimeHour.val(startTimeHour),endTimeMin.val()<=startTimeMin&&endTimeMin.val(startTimeMin))},$scope.openSnippetVoiceFileSelect=function(){$timeout(function(){angular.element("#campaignVoiceFileInput1").trigger("click")},100)};var snippetVoiceMessageUpload=$scope.snippetVoiceMessageUpload=new FileUploader({url:"/snippets/upload-snippet-file",alias:"file",headers:{JWTAuthorization:"Bearer "+localStorage.getItem("jwtToken")},autoUpload:!0,formData:[{part:"snippet"}]});snippetVoiceMessageUpload.onAfterAddingFile=function(item){$rootScope.disableButton(),$scope.uploadingAudioName=item.file.name},snippetVoiceMessageUpload.onSuccessItem=function(item,response,status,headers){$rootScope.enabledButton(),$rootScope.stopModalLoader(),0==response.resource.error.no?($scope.voiceFile=response.resource.file,$scope.snippetData.voice_file_id=response.resource.file._id,growl.success(trans(response.resource.error.message))):growl.error(trans(response.resource.error.text))},snippetVoiceMessageUpload.onErrorItem=function(item,response,status,headers){$scope.errors=response,$rootScope.enabledButton(),$rootScope.stopModalLoader()},snippetVoiceMessageUpload.onBeforeUploadItem=function(){$rootScope.disableButton(),$rootScope.startModalLoader()},$scope.getAudioSource=function(audioTemplate){return!!audioTemplate&&$sce.trustAsResourceUrl(audioTemplate.amazon_s3_url)},$scope.playPauseRecordedAudio=function(audioTemplate){var audio=document.getElementById("audioFileSnippet"),play=angular.element("#audioFilePlay");$scope.isRecordedFilePlaying?(audio.pause(),play.removeClass("pause"),play.removeClass("black")):(audio.play(),play.addClass("pause"),play.addClass("black"),audio.addEventListener("ended",function(){$scope.isRecordedFilePlaying=!1,play.removeClass("pause"),play.removeClass("black")},!1)),$scope.isRecordedFilePlaying=!$scope.isRecordedFilePlaying},$scope.openSnippetImageSelect=function(){$timeout(function(){angular.element("#campaignImageInput1").trigger("click")},100)};var snippetImageUpload=$scope.snippetImageUpload=new FileUploader({url:"/snippets/upload-image-file",alias:"file",headers:{JWTAuthorization:"Bearer "+localStorage.getItem("jwtToken")},autoUpload:!0});snippetImageUpload.onAfterAddingFile=function(item){$rootScope.disableButton()},snippetImageUpload.onSuccessItem=function(item,response,status,headers){$rootScope.enabledButton(),$rootScope.stopModalLoader(),0==response.resource.error.no?($scope.snippetImagePath=response.resource.url,$scope.snippetData.image_name=response.resource.name):growl.error(trans(response.resource.error.text))},snippetImageUpload.onErrorItem=function(item,response,status,headers){$scope.errors=response,$rootScope.enabledButton(),$rootScope.stopModalLoader(),growl.error($rootScope.trans("something__went__wrong"))},snippetImageUpload.onBeforeUploadItem=function(){$rootScope.disableButton(),$rootScope.startModalLoader()};try{var day=Object.keys($scope.customDateRangeLocal)[0];$scope.frontDay=$scope.weekdays[$scope.englishWeekdays.indexOf(day)],$scope.selecedHour=$scope.hoursArrCustom[0]}catch(e){$scope.frontDay="",$scope.selecedHour="00"}$scope.customDateRange=!0,$scope.defaultDateTab=1,$scope.tabs=function(tabIndex,name){"text"===name?1===tabIndex?$scope.defaultTextTab=0:$scope.defaultTextTab=1:"audio"===name&&(1===tabIndex?$scope.defaultAudioTab=0:$scope.defaultAudioTab=1)},$scope.$watch("snippetData.custom_date_times",function(newVal){var sendData={};sendData.custom_date_times=newVal,sendData.offset=(new Date).getTimezoneOffset()/60,SnippetService.getMergedDate(sendData).then(function(data){if(0===data.resource.error.no){$scope.customDateRangeLocal=data.resource.date;var day=Object.keys($scope.customDateRangeLocal)[0];$scope.frontWeekDayCustom(day),$scope.frontDay||($scope.frontDay=$scope.weekdays[$scope.englishWeekdays.indexOf(day)])}})},!0),$scope.saveSnippet=function(part){if(!$scope.disabledSubmitButton||!part){!part&&$scope.editSnippet?$scope.snippetData.saveType="save":part?$scope.snippetData.saveType="saveAndCreate":$scope.snippetData.saveType="saveAsDraft",$scope.snippetData.has_custom_date_times=$scope.customDateRange,$scope.buttonLoading=!0,$scope.defaultTextTab||($scope.snippetData.default_text="");var id=!!$scope.editSnippet&&$scope.editSnippet.resource.snippets._id;0==$scope.defaultTextTab&&($scope.snippetData.default_text=null),0==$scope.defaultAudioTab&&($scope.snippetData.voice_file_id=null);var allowed_url="";$scope.snippetData.allowed_urls.forEach(function(item){allowed_url+=item.text+","}),$scope.snippetData.allowed_url=allowed_url;SnippetService.snippetCRUD($scope.snippetData,id).then(function(data){var subdomain=data.resource.snippets.subdomain,snippetId=data.resource.snippets._id,imgQRCodeURL=data.resource.snippets.qr_code_img_url;$scope.buttonLoading=!1,0===data.resource.error.no&&($scope.editSnippet?$state.go("snippet.overview"):SnippetService.getApiJs(data.resource.snippets.api_token).then(function(data){if(!part)return void $state.go("snippet.overview");var javascript=data.resource.javascript,snippetImagePath=$scope.snippetImagePath,callRoutes_serv=$scope.callRoutes,snippet=$scope.snippetData,choice=$scope.choice,frontCountry=$scope.frontCountry($scope.snippetData.countries[$scope.firstCountryId]),dropdown_false=!1;CallBournModal.open({scope:{showAll:$scope.snippetData.allowed_urls.length,snippetId:snippetId,javascript:javascript,callRoutes:callRoutes_serv,snippetData:snippet,snippetImagePath:snippetImagePath,callburn_domain:"ctc_callmecallburncom_localname",subdomain:subdomain,dropdownOpen:dropdown_false,choice:choice,frontCountry:frontCountry,checkInArray:$scope.checkInArray,replaceToFrontCountry:$scope.replaceToFrontCountry,imgQRCodeURL:imgQRCodeURL},templateUrl:"/app/modals/clickToCall/confirm_snippet_creation_2.html"},function(scope,Restangular){scope.close=function(){$state.go("snippet.overview"),CallBournModal.close()},scope.copyEffect=function(part){scope.copyEffectPart=part,scope.copyEffectClass="animated fadeOutUp",$timeout(function(){scope.copyEffectClass=""},1e3)}})}))},function(errors){if($scope.buttonLoading=!1,Object.values(errors.data))for(var ids=["callerIds","wait_time","countries","weekDays","dateRange","dateRangeCustom","snippetName","allowed_url"],i=0;i<ids.length;i++)if($scope.checkInArray(Object.keys(errors.data),ids[i])){"snippetName"===ids[i]?$scope.wrongBorder="snippet-wrong-border":$scope.wrongBorder="",$scope.navigateScrollTo(ids[i]);break}})}},$scope.navigateScrollTo=function(id){var element=angular.element(document.getElementById(id)),text=angular.element(document.getElementById(id+"Text")),body=angular.element("body");return body.animate({scrollTop:element.offset().top-10},"slow",function(){element.addClass("animated shake snippet-not-valid"),text.addClass("snippet-not-valid"),$timeout(function(){element.removeClass("animated shake")},2e3)}),!0},$scope.$watch("snippetData.allowed_urls",function(newVal,oldVal){0===$scope.snippetData.allowed_urls&&$scope.removeRedColor("allowed_url")},!0),$scope.checkUrls=function(){},$scope.checkValidTag=function(tag){return $scope.checkInArray($scope.invalidUrls,tag.text)},$scope.checkTag=function(tag){SnippetService.checkUrl(tag.text).then(function(data){0!=data.resource.error.no?($scope.invalidUrls.push(tag.text),$scope.snippetData.haveInvalidUrl=!0):($scope.snippetData.haveInvalidUrl=!1,$scope.snippetData.allowed_urls.forEach(function(item){if($scope.checkInArray($scope.invalidUrls,item.text))return void($scope.snippetData.haveInvalidUrl=!0)}),$scope.snippetData.haveInvalidUrl||$scope.removeRedColor("allowed_url"))},function(data){$scope.invalidUrls.push(tag.text),$scope.snippetData.haveInvalidUrl=!0})},$scope.removeUrl=function(tag){var index=$scope.invalidUrls.indexOf(tag.text);index>-1&&$scope.invalidUrls.splice(index,1),0==$scope.invalidUrls.length&&($scope.removeRedColor("allowed_url"),$scope.snippetData.haveInvalidUrl=!1)},$scope.enableSupportCountries=function(){$scope.callRoutes.forEach(function(item){$scope.checkInArray($scope.snippetData.countries,item._id)||$scope.snippetData.countries.push(item._id)})},$scope.copyEffect=function(part){$scope.copyEffectPart=part,$scope.copyEffectClass="animated fadeOutUp",$timeout(function(){$scope.copyEffectClass=""},1e3)}}]);