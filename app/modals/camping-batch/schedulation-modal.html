<div class="customize-modal new_modal_style calendar" ng-init="initCalendar()" id="calendar"> <div class="modal-header"> <h4 class="modal-title" id="myModalLabel"> {{ trans("modals_camping_batch_schedulation_modal_voice_message_schedule") }} </h4> <i ng-click="discardSchedulation();hideOverlay()" class="fa fa-times"></i> </div> <div class="modal-body schedule"> <div class="top_txt"> <p> {{ trans("modals_camping_batch_schedulation_modal_your_message_should") }} <span> {{ finalRecipientsCount - usedRecipentsCount | number }} {{ trans("modals_campaign_schedulation_recipient") }}. </span> </p> <p> {{ trans("modals_camping_batch_schedulation_modal_choose_when_you") }} </p> </div> <div class="row"> <div class="col-md-4 col-xs-4 col-sm-4 block-1"> <div uib-tooltip="{{ trans('calendarExplanation') }}" popover-is-open="isOpen"> <p class="title text-center"> {{ trans("modals_camping_batch_schedulation_modal_start_to_send_on") }} </p> <div class="calendar-container"> <div class="span8 calendar" calendar="myCalendar" ui-calendar="uiConfig.calendar" ng-model="eventSources"></div> </div> </div> </div> <div class="col-xs-8"> <div class="actions_btn"> <div class="action time_squares_holder" ng-class="{'error snippet_blinking': noEventsError}"> <p class="title">{{ trans("dragColor") }}</p> <ul class="time_squares"> <li ng-repeat="time in times track by $index"> <label class="btn square item-field" ng-class="{darkerColorBlue : time.color == 'rgb(98, 178, 247)' && !time.timeslot, darkerColorOrange : time.color == 'rgb(255, 152, 0)' && !time.timeslot, darkerColorRed : time.color == 'rgb(243, 86, 83)' && !time.timeslot, darkerColorCyan : time.color == 'rgb(98, 243, 229)' && !time.timeslot}" data-drag="true" data-jqyoui-options="{revert: 'invalid'}" jqyoui-draggable="{index: {{ $index }}, animate:true}" ng-model="time.checked" uib-btn-checkbox="" ng-mousedown="stopBlink($event, team)" ng-style="{background : time.color}" id="widget"><i style="opacity: 0;">{{ time.color }}</i></label> </li> </ul> </div> <div class="action send-event-to-trash-container"> <div role="alert" data-drop="true" ng-click="clearCalendar()" class="btn btn-danger ui-droppable" ng-disabled="!eventSourcesLength"> <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> {{ trans("deleteScheduleExplanation") }} </div> </div> </div> <img src="/assets/callburn/images/drag_arrow.svg" class="drag_arrow_hint" alt="" ng-if="!eventSourcesLength && !pastSchedulations.length"> <ul class="col-xs-12 slots"> <li class="schedule-border" style="border: 2px solid {{ time.color }}" ng-repeat="time in times track by $index" ng-if="time.timeslot"> <div class="timeslot_top" style="background: {{ time.color }}" ng-class="{darkerColorBlue : time.color == 'rgb(98, 178, 247)' && !time.timeslot, darkerColorOrange : time.color == 'rgb(255, 152, 0)' && !time.timeslot, darkerColorRed : time.color == 'rgb(243, 86, 83)' && !time.timeslot, darkerColorCyan : time.color == 'rgb(98, 243, 229)' && !time.timeslot}"> {{ trans("timeslot") }} {{ $index + 1 }} </div> <div class="timeslot_parent"> <div class="timeslot_holder"> <div class="timezone-img-container" uib-tooltip="{{ timeSlotColorExplanation }}"> <p class="time_txt"> <img src="/assets/callburn/images/images/TimeZoneIcon.svg"> {{ trans("modals_camping_batch_schedulation_modal_hour") }} </p> <div class="sel item-field"> <select ng-model="time.hour" ng-options="n as n for n in [] | range:23 track by n" class="form-control hours"></select> </div> <div class="sel item-field"> <select ng-model="time.minute" ng-options="n as n for n in [] | range:59 track by n" class="form-control minutes"></select> </div> </div> <div class="timezone-img-container recipients-count-to-call" uib-tooltip="{{ trans('recipientText') }}"> <p class="time_txt"> <i class="fa fa-users"></i> {{ trans("campaign_compose_compose_step_2_recipients") }} </p> <div class="item-field"> <input class="form-control" min="0" ng-class="{'snippet-wrong-border' : recipentsCountToCallRedBorder, 'error snippet-blinking': emptysError}" ng-model="time.recipients_count_to_call" type="number" ng-change="recipentCountChangedManually(time)"> <span ng-if="time.color === 'rgb(98, 178, 247)' && blueX > 1"> x{{ blueX }} </span> <span ng-if="time.color === 'rgb(255, 152, 0)' && orangeX > 1"> x{{ orangeX }} </span> <span ng-if="time.color === 'rgb(243, 86, 83)' && redX > 1"> x{{ redX }} </span> <span ng-if="time.color === 'rgb(98, 243, 229)' && cyanX > 1"> x{{ cyanX }} </span> </div> </div> <div class="timezone-img-container delivery-img-container" uib-tooltip="{{ trans('deliveryExplanation') }}"> <p class="time_txt"> <img src="/assets/callburn/images/images/speed@3x.svg"> {{ trans("modals_camping_batch_schedulation_modal_speed") }} </p> <div class="scroller item-field"> <rzslider rz-slider-model="time.delivery_speed" rz-slider-options="slider.options"></rzslider> <p data-ng-if="time.delivery_speed > 0"> {{ time.delivery_speed }} {{ trans("modals_camping_batch_schedulation_modal_minutes") }} </p> <p data-ng-if="time.delivery_speed == 0"> {{ trans( "modals_camping_batch_schedulation_modal_max_speed" ) }} </p> </div> </div> </div> </div> <div class="week-cl item-field" ng-if="time.is_multiple" uib-tooltip="{{ trans('popoverWeekDay') }}"> <div class="btn-group"> <label class="btn btn-default" ng-model="time.week_days.Monday" uib-btn-checkbox="">Mo</label> <label class="btn btn-default" ng-model="time.week_days.Tuesday" uib-btn-checkbox="">Tu</label> <label class="btn btn-default" ng-model="time.week_days.Wednesday" uib-btn-checkbox="">We</label> <label class="btn btn-default" ng-model="time.week_days.Thursday" uib-btn-checkbox="">Th</label> <label class="btn btn-default" ng-model="time.week_days.Friday" uib-btn-checkbox="">Fr</label> <label class="btn btn-default" ng-model="time.week_days.Saturday" uib-btn-checkbox="">Sa</label> <label class="btn btn-default" ng-model="time.week_days.Sunday" uib-btn-checkbox="">Su</label> </div> </div> <div class="week-picker item-field" ng-if="time.is_multiple" uib-tooltip="{{ trans('popoverWeekCount') }}"> <div class="form-group form-inline"> <label>{{ trans("modals_camping_batch_schedulation_modal_for") }}</label> <input type="text" class="form-control" ng-model="time.week_number" ng-disabled="!time.week_days.Monday && !time.week_days.Tuesday && !time.week_days.Wednesday && !time.week_days.Thursday && !time.week_days.Friday && !time.week_days.Saturday && !time.week_days.Sunday" ng-minlength="1" ng-maxlength="4"> <p style="display: inline-block"> {{ trans("modals_camping_batch_schedulation_modal_week_s") }} </p> </div> </div> </li> </ul> </div> </div> <div class="footer_holder"> <div> <div class="recipient_holder"> <div class="recipient_style"> <h1 class="title"> {{ trans("completed_recipients") }} </h1> <div class="inner"> <p class="item">{{ pastedEventsRecipients }}</p> </div> </div> <div class="recipient_style"> <h1 class="title"> {{ trans("completed_past_schedules") }} </h1> <div class="inner"> <p class="item">{{ pastedEventSourcesLength }}</p> </div> </div> </div> <div class="recipient_holder"> <div class="recipient_style"> <h1 class="title"> {{ trans("modals_camping_batch_schedulation_modal_total_scheduled") }} </h1> <div class="inner"> <p class="item"> {{ eventSourcesLength - pastedEventSourcesLength }} </p> </div> </div> <div class="recipient_style"> <h1 class="title"> {{ trans("modals_camping_batch_schedulation_modal_deliveries_will") }} </h1> <div class="inner" ng-class="{'error snippet_blinking': emptysError}"> <p class="item" ng-class="{negative: forEverySingleSchedulation < 0}"> {{ forEverySingleSchedulation }} {{ trans("campaign_compose_compose_step_3_recipient") }} </p> </div> </div> </div> </div> <span class="footer-text"> <span style="color: #3190e6; font-weight: bold;" ng-if="eventSourcesLength"> {{ trans("batch_show_repiteation_count_confirm_message_schedulation") }} {{ trans("modals_camping_batch_schedulation_modal_starts_on") }} {{ minDateToDisplay && eventSourcesLength > 0 ? minDateToDisplay : "" }} <span style="display: inline-block;" ng-if="(maxDateToDisplay && eventSourcesLength && (minDateToDisplay !== maxDateToDisplay))"> {{ trans("modals_camping_batch_schedulation_modal_ends_on") }} {{ maxDateToDisplay && eventSourcesLength && (minDateToDisplay !== maxDateToDisplay) > 0 ? maxDateToDisplay : "" }} </span> </span><br><i class="snippet_blinking" ng-show="eventSourcesLength">{{ trans( "modals_camping_batch_schedulation_modal_be_sure_about_schedulated" ) }}</i> </span> <div class="btn_holder"> <button class="btn btn-danger full-width" data-ng-click="discardSchedulation();hideOverlay()" ng-disabled="disableScheduleBtns"> {{ trans("modals_camping_batch_schedulation_modal_discard") }} </button> <button class="btn btn-success full-width schedule_send" ng-disabled="disableScheduleBtns" ng-click="saveSchedulation()" uib-tooltip="{{ recipentsCountToCallRedBorder ? trans('recipients_count_to_call_explanation') : '' }}"> {{ trans("modals_camping_batch_schedulation_modal_sav_it_and_send") }} <img src="/assets/callburn/images/images/blue-audio-spinner-big.svg" class="schedule_btn_spinner" ng-if="showScheduleSpinner"> </button> </div> </div> </div> </div> 